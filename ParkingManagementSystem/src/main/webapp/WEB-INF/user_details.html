<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>User Details</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="author" content="" />
        <meta property="og:title" content="" />
        <meta property="og:image" content="" />
        <meta property="og:url" content="" />
        <meta property="og:site_name" content="" />
        <meta property="og:description" content="" />
        <meta name="twitter:title" content="" />
        <meta name="twitter:image" content="" />
        <meta name="twitter:url" content="" />
        <meta name="twitter:card" content="" />
        <link rel="shortcut icon" href="favicon.ico">
        <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">
        <link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" href="css/icomoon.css">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/flexslider.css">
        <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
        <link rel="stylesheet" href="css/owl.carousel.min.css">
        <link rel="stylesheet" href="css/owl.theme.default.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="js/modernizr-2.6.2.min.js"></script>
    </head>
    <style>
        .btn.btn-md {
            padding: 8px 20px !important;
            margin-left: 550px;
        }

        .fa,
        .fa-brands,
        .fa-duotone,
        .fa-light,
        .fa-regular,
        .fa-solid,
        .fa-thin,
        .fab,
        .fad,
        .fal,
        .far,
        .fas,
        .fat {
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
            display: var(--fa-display, inline-block);
            font-style: normal;
            font-variant: normal;
            line-height: 1;
            text-rendering: auto;
            font-size: 11.5px;
        }

        .row {
            font-size: 15px;
            margin-left: -20px;
            margin-right: -15px;
        }
    </style>
    <body>
        <div id="colorlib-page">
            <a class="js-colorlib-nav-toggle colorlib-nav-toggle">
                <i></i>
            </a>
            <aside id="colorlib-aside" role="complementary" class="border js-fullheight">
                <h1 id="colorlib-logo"></h1>
                <nav id="colorlib-main-menu" role="navigation">
                    <ul>
                        <li>
                            <a href="index.html">Dashboard</a>
                        </li>
                        <li class="colorlib-active">
                            <a href="user_details.html">Manage Users</a>
                        </li>
                        <li>
                            <a href="view_bookings.html">View Bookings</a>
                        </li>
                    </ul>
                </nav>
            </aside>
            <div id="colorlib-main">
                <div class="colorlib-contact">
                    <div class="colorlib-narrow-content">
                        <div class="row">
                            <div class="col-md-12 animate-box" data-animate-effect="fadeInLeft">
                                <h2 class="colorlib-heading">User Details</h2>
                            </div>
                        </div>
                        <div class="row">
                            <center></center>
                            <script>
                                async function goToForm() {
                                    location.replace("UserRegistrationForm.html");
                                }
                            </script>
                            <br>
                            <div class="col-lg-12">
                                <table class="table table-dark table-hover" id="customers">
                                    <div class="detailsbutton">
                                        <input type="text" id="myInput" placeholder="Search for names.." title="Type in a name">
                                        <button class="btn btn-success btn-md" onclick="goToForm()">
                                            <i class="fa-solid fa-angles-right">Register User</i>
                                        </button>
                                    </div>
                                    <thead>
                                        <tr>
                                            <th onclick="sortTable(0);">No</th>
                                            <th>Car Number</th>
                                            <th>Name </th>
                                            <th>Email </th>
                                            <th>DOB</th>
                                            <th>Address</th>
                                            <th>Gender</th>
                                            <th>Phone No</th>
                                        </tr>
                                    </thead>
                                    <tbody id="cust"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery.easing.1.3.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jquery.waypoints.min.js"></script>
        <script src="js/jquery.flexslider-min.js"></script>
        <script src="js/sticky-kit.min.js"></script>
        <script src="js/owl.carousel.min.js"></script>
        <script src="js/jquery.countTo.js"></script>
        <script src="js/main.js"></script>
        <script>
            var ajax = new XMLHttpRequest();
            var method = "GET";
            var url = "http://localhost:8080/ParkingSlot2/info";
            var asynchronous = true;
            ajax.open(method, url, asynchronous);
            ajax.send();
            ajax.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var data = JSON.parse(this.responseText);
                    console.log(data)
                    var html = "";
                    for (var a = 0; a < data.length; a++) {
                        var id = data[a].id;
                        var car_number = data[a].car_number;
                        var name = data[a].name;
                        var email = data[a].email;
                        var dob = data[a].dob;
                        var address = data[a].address;
                        var gender = data[a].gender;
                        var phone = data[a].phone;
                        html += " <tr> ";
                        html += "  <td> " + id + " </td> "
                        html += "  <td> " + car_number + " </td>";
                        html += "  <td> " + name + " </td>";
                        html += "  <td> " + email + " </td>";
                        html += "  <td> " + dob + " </td>";
                        html += "  <td> " + address + " </td>";
                        html += "  <td> " + gender + " </td>";
                        html += "  <td> " + phone + " </td>";
                        html += "  </tr>";
                    }
                    document.getElementById("cust").innerHTML = html;
                }
            }
            $(document).ready(function() {
                $("#myInput").on("keyup", function() {
                    var value = $(this).val().toLowerCase();
                    $("#cust tr").filter(function() {
                        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
                });
            });

            function sortTable(n) {
                var table, rows, switching, i, x, y, shouldSwitch;
                table = document.getElementById("cust");
                switching = true;
                /*Make a loop that will continue until
                no switching has been done:*/
                while (switching) {
                    //start by saying: no switching is done:
                    switching = false;
                    rows = table.rows;
                    /*Loop through all table rows (except the
                    first, which contains table headers):*/
                    for (i = 0; i < (rows.length - 1); i++) {
                        //start by saying there should be no switching:
                        shouldSwitch = false;
                        /*Get the two elements you want to compare,
                        one from current row and one from the next:*/
                        x = rows[i].getElementsByTagName("td")[0];
                        y = rows[i + 1].getElementsByTagName("td")[0];
                        console.log(x)
                        //check if the two rows should switch place:
                        if (Number(x.innerHTML) < Number(y.innerHTML)) {
                            //if so, mark as a switch and break the loop:
                            shouldSwitch = true;
                            break;
                        }
                    }
                    if (shouldSwitch) {
                        /*If a switch has been marked, make the switch
                        and mark that a switch has been done:*/
                        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                        switching = true;
                    }
                }
            }
        </script>
    </body>
</html>